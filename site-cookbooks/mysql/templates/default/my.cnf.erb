# Dropped off by Chef... do not edit!

[client]
port = 3306

[mysqld]
user = mysql
port = 3306
bind-address = <%= node[:mysql][:bind_address] %>

skip-external-locking
log_warnings
explicit_defaults_for_timestamp

basedir = /usr
datadir = /var/lib/mysql

character-set-server = <%= node[:mysql][:tunable][:character_set_server] %>
collation-server = <%= node[:mysql][:tunable][:collation_server] %>

innodb_data_file_path = ibdata1:100M:autoextend
innodb_buffer_pool_size = <%= node[:mysql][:tunable][:innodb_buffer_pool_size] %>
innodb_buffer_pool_instances = <%= node[:mysql][:tunable][:innodb_buffer_pool_instances] %>

innodb_flush_log_at_trx_commit = <%= node[:mysql][:tunable][:innodb_flush_log_at_trx_commit] %>
innodb_lock_wait_timeout = <%= node[:mysql][:tunable][:innodb_lock_wait_timeout] %>
innodb_file_per_table
innodb_io_capacity = <%= node[:mysql][:tunable][:innodb_io_capacity] %>
innodb_read_io_threads = <%= node[:mysql][:tunable][:innodb_read_io_threads] %>
innodb_write_io_threads = <%= node[:mysql][:tunable][:innodb_write_io_threads] %>

# All other settings
table_open_cache = <%= node[:mysql][:tunable][:table_open_cache] %>
table_definition_cache = <%= node[:mysql][:tunable][:table_definition_cache] %>

query_cache_type = <%= node[:mysql][:tunable][:query_cache_type] %>
query_cache_size = <%= node[:mysql][:tunable][:query_cache_size] %>
query_cache_limit = <%= node[:mysql][:tunable][:query_cache_limit] %>
query_cache_min_res_unit = <%= node[:mysql][:tunable][:query_cache_min_res_unit] %>

tmpdir = <%= node[:mysql][:tunable][:tmp_dir] %>
tmp_table_size = <%= node[:mysql][:tunable][:tmp_table_size] %>
max_heap_table_size = <%= node[:mysql][:tunable][:max_heap_table_size]%>
max_connections = <%= node[:mysql][:tunable][:max_connections] %>
max_allowed_packet = <%= node[:mysql][:tunable][:max_allowed_packet] %>
connect_timeout = <%= node[:mysql][:tunable][:connect_timeout] %>
net_read_timeout = <%= node[:mysql][:tunable][:net_read_timeout] %>
net_write_timeout = <%= node[:mysql][:tunable][:net_write_timeout] %>
net_buffer_length = <%= node[:mysql][:tunable][:net_buffer_length] %>
read_buffer_size = <%= node[:mysql][:tunable][:read_buffer_size] %>
thread_stack = <%= node[:mysql][:tunable][:thread_stack] %>
transaction-isolation = <%= node[:mysql][:tunable][:transaction_isolation] %>
event_scheduler = <%= node[:mysql][:tunable][:event_scheduler] %>
group_concat_max_len = <%= node[:mysql][:tunable][:group_concat_max_len] %>

# Slow query log settings
slow_query_log = OFF
slow_query_log_file = /var/log/mysql/slowquery.log
long_query_time = 0
log-queries-not-using-indexes = OFF

log-error = /var/log/mysql/error.log

<% if node[:mysql][:replica_specific].eql?("yes") %>
replicate-wild-do-table = <%= node[:mysql][:tunable][:replicate_wild_do_table] %>
replicate-ignore-table = <%= node[:mysql][:tunable][:replicate_ignore_table] %>
<% end %>

[mysqldump]
max_allowed_packet = <%= node[:mysql][:tunable][:max_allowed_packet] %>

[mysql]
no-auto-rehash

